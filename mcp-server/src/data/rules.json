{
  "connectionRules": [
    {
      "from": "document-extractor",
      "to": ["data-validator", "classifier-agent", "enrichment-agent"],
      "description": "Document extractor outputs should be validated or classified"
    },
    {
      "from": "data-validator",
      "to": ["enrichment-agent", "router-agent", "approval-agent", "exception-handler"],
      "description": "Validated data can be enriched, routed, or sent for approval"
    },
    {
      "from": "classifier-agent",
      "to": ["router-agent", "notification-agent", "exception-handler"],
      "description": "Classification results drive routing and notifications"
    },
    {
      "from": "compliance-checker",
      "to": ["approval-agent", "exception-handler", "notification-agent"],
      "description": "Compliance results may require approval or exception handling"
    },
    {
      "from": "kyc-screener",
      "to": ["compliance-checker", "approval-agent", "notification-agent"],
      "description": "Screening results need compliance review or approval"
    },
    {
      "from": "trade-matcher",
      "to": ["reconciliation-agent", "settlement-instructor", "exception-handler"],
      "description": "Matched trades proceed to reconciliation or settlement"
    }
  ],
  "humanTouchpointRules": [
    {
      "trigger": "high-value-transaction",
      "threshold": "$1,000,000",
      "requiredTouchpoint": "approval",
      "description": "Transactions over $1M require human approval"
    },
    {
      "trigger": "compliance-violation",
      "requiredTouchpoint": "review",
      "description": "Any compliance violation requires human review"
    },
    {
      "trigger": "kyc-screening-match",
      "requiredTouchpoint": "investigation",
      "description": "KYC screening matches require human investigation"
    },
    {
      "trigger": "reconciliation-break",
      "threshold": "$10,000",
      "requiredTouchpoint": "investigation",
      "description": "Reconciliation breaks over $10K require investigation"
    },
    {
      "trigger": "deadline-risk",
      "requiredTouchpoint": "escalation",
      "description": "Items at risk of missing deadlines should be escalated"
    },
    {
      "trigger": "exception-unresolved",
      "maxRetries": 3,
      "requiredTouchpoint": "manual-resolution",
      "description": "Exceptions that fail auto-resolution need manual handling"
    }
  ],
  "domainRequirements": {
    "corporate-actions": {
      "requiredAgents": ["document-extractor", "data-validator", "notification-agent"],
      "recommendedAgents": ["enrichment-agent", "election-processor", "position-keeper"],
      "dataSources": ["dtcc", "swift", "bloomberg", "issuer-communications"],
      "regulations": ["sec-rule-10b-17", "mifid-ii", "csdr"]
    },
    "kyc": {
      "requiredAgents": ["document-extractor", "kyc-screener", "compliance-checker"],
      "recommendedAgents": ["data-validator", "approval-agent", "notification-agent"],
      "dataSources": ["ofac", "eu-sanctions", "pep-databases", "adverse-media"],
      "regulations": ["aml-bsa", "fatf", "gdpr", "kyc-rule"]
    },
    "trading": {
      "requiredAgents": ["trade-matcher", "compliance-checker"],
      "recommendedAgents": ["settlement-instructor", "position-keeper", "reconciliation-agent"],
      "dataSources": ["exchange-feeds", "counterparty-systems", "clearing-houses"],
      "regulations": ["reg-sho", "mifid-ii", "dodd-frank"]
    },
    "settlement": {
      "requiredAgents": ["settlement-instructor", "position-keeper"],
      "recommendedAgents": ["trade-matcher", "reconciliation-agent", "notification-agent"],
      "dataSources": ["dtcc", "swift", "custodian-systems"],
      "regulations": ["t+1", "csdr", "reg-sho"]
    }
  }
}
